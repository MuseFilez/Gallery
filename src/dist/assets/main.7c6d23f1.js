import{g as e,n as t,s as n,a as o,m as l,h as c}from"./storage.52eb1b12.js";import"./vendor.061fb27f.js";let d=null;function s(e){e.target.files.length<1?console.log("nothing selected"):i(e.target.files[0])}function a(e){e.preventDefault();const t=[...e.dataTransfer.files].filter((e=>e.type.includes("image")));t.length<1?console.log("drop handler recieved no image files, ignoring drop event"):i(t[0])}function i(e){const t=document.getElementById("upload-button");d=e,null!=e?(!function(e){const t=document.querySelectorAll("img.preview-image"),n=URL.createObjectURL(e);for(const o of t)o.src=n}(e),t.disabled=!1):t.disabled=!0}function u(e){if(e.preventDefault(),null==d)return void console.log("no file selected");!function(){const e=document.getElementById("upload-in-progress");o(e),function(){const e=document.getElementById("upload-input-area");c(e)}(),m()}();const t=document.getElementById("caption-input").value||"";n(d,t).then(r)}function r(e){g();document.getElementById("success-gallery-link").href=`./gallery.html#${e.cid}`;document.getElementById("success-gateway-link").href=e.imageGatewayURL;const t=document.getElementById("upload-success"),n=l(e.imageGatewayURL);t.appendChild(n),o(t)}function g(){const e=document.getElementById("upload-in-progress");c(e)}function m(){const e=document.getElementById("upload-success");c(e)}e()||t(),function(){if(!document.getElementById("upload-ui"))return;const e=document.getElementById("upload-button"),t=document.getElementById("file-input"),n=document.getElementById("drop-area");!function(){const e=document.getElementById("upload-input-area");o(e),g(),m()}(),t.onchange=s,e.onclick=u;for(const o of["dragenter","dragover"]){const e=e=>{e.preventDefault(),n.classList.add("highlight")};n.addEventListener(o,e,!1)}for(const o of["dragleave","drop"]){const e=e=>{e.preventDefault(),n.classList.remove("highlight")};n.addEventListener(o,e,!1)}n.addEventListener("drop",a,!1)}();
